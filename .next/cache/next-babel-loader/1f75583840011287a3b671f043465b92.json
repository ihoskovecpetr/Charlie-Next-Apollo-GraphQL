{"ast":null,"code":"const {\n  PubSub\n} = require(\"apollo-server\");\n\nconst NEW_USER = \"NEW_USER\";\nexport const pubsub = new PubSub();\nexport const resolvers = {\n  Subscription: {\n    newUser: {\n      subscribe: (_, __, {\n        pubsub\n      }) => pubsub.asyncIterator(NEW_USER)\n    }\n  },\n  Query: {\n    viewer(_parent, _args, _context, _info) {\n      return {\n        id: 1,\n        name: \"John Smith XoX\",\n        status: \"cached\"\n      };\n    }\n\n  },\n  Mutation: {\n    newUser(_parent, _args, {\n      pubsub\n    }, _info) {\n      console.log(\"_args: \", _args);\n      pubsub.publish(NEW_USER, {\n        id: 101,\n        name: \"John Subscriber\",\n        status: \"cacheding\"\n      });\n      return {\n        id: 123,\n        name: _args.newUser.name,\n        status: _args.newUser.status\n      };\n    }\n\n  }\n};","map":null,"metadata":{},"sourceType":"module"}